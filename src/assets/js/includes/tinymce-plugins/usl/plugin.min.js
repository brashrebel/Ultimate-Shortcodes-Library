var USL_tinymce;!function(a){var b;USL_tinymce={init:function(){this.add_to_tinymce(),this.binds()},binds:function(){a(document).on("usl-modal-close",function(){USL_tinymce.close()}),a(document).on("usl-modal-update",function(){USL_tinymce.update()})},editorBinds:function(){b.on("click",function(){})},add_to_tinymce:function(){tinymce.PluginManager.add("usl",function(c){function d(a,b){a.active(-1!==b.className.indexOf("usl-tinymce-shortcode-wrapper"))}b=c,USL_tinymce.editorBinds(),b.addButton("usl",{icon:"usl-mce-icon",cmd:"usl-open",onPostRender:function(){var a=this;b.on("nodechange",function(b){d(a,b.element)})}}),b.on("keyup",function(){var c=b.selection.getNode(),d=a(c);"mce_noneditablecaret"===d.attr("id")&&d.attr("data-mce-bogus")&&d.replaceWith(c.childNodes)}),b.addCommand("usl-open",function(){var c=b.selection.getContent(),d=b.selection.getNode(),e=a(d);if(e.hasClass("usl-tinymce-shortcode-wrapper")){var f=e.find(".usl-tinymce-shortcode-content").html(),g=a("<div />").append(e.clone()).html(),h=USL_tinymce.visualToLiteral(g);USL_Modal.modify(h,f)}else USL_Modal.open(c)}),b.on("BeforeSetContent",function(b){b.content&&a.each(USL_MCECallbacks.callbacks,function(a){b.content=USL_MCECallbacks._convertLiteralToRendered(USL_MCECallbacks.callbacks[a],b.content)})}),b.on("PostProcess",function(b){b.get&&a.each(USL_MCECallbacks.callbacks,function(a){b.content=USL_MCECallbacks._convertRenderedToLiteral(USL_MCECallbacks.callbacks[a],b.content)})})})},visualToLiteral:function(b){var c=USL_MCECallbacks._getVisualAtts(b),d=USL_MCECallbacks._getVisualContent(b),e=USL_MCECallbacks._getVisualCode(b),f="["+e;return c&&a.each(c,function(a,b){b.length&&(f+=" "+a+'="'+b+'"')}),f+="]",d.length&&(f+=d+"[/"+e+"]"),f},close:function(){b.focus()},update:function(){b.insertContent(USL_Modal.output)},removeShortcode:function(a){a.closest(".usl-tinymce-shortcode-wrapper").remove()}},a(function(){USL_tinymce.init()})}(jQuery);
//# sourceMappingURL=plugin.min.js.map