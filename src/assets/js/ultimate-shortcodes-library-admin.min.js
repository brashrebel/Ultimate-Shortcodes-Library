var USL_Admin;if(function(a){USL_Admin={init:function(){}},a(function(){USL_Admin.init()})}(jQuery),"undefined"==typeof USL_MCE){var USL_MCE;!function(a){var b,c,d={};USL_MCE={init:function(){this.establish_elements(),this.binds(),this.add_to_mce(),this.prevent_window_scroll(),this.activate_shortcode(),this.search()},load:function(){},resize:function(){this.list_height()},establish_elements:function(){d.wrap=a("#usl-mce-wrap"),d.submit=a("#usl-mce-submit"),d.backdrop=a("#usl-mce-backdrop"),d.form=a("#usl-mce-form"),d.cancel=d.wrap.find(".usl-mce-cancel"),d.close=d.wrap.find(".usl-mce-close"),d.title=d.wrap.find(".usl-mce-title"),d.search=d.wrap.find(".usl-mce-search"),d.categories=d.wrap.find(".usl-mce-categories"),d.footer=d.wrap.find(".usl-mce-footer"),d.list=d.wrap.find(".usl-mce-shortcodes")},binds:function(){d.submit.off("click").click(function(a){a.preventDefault(),USL_MCE.update()}),d.cancel.click(function(a){a.preventDefault(),USL_MCE.close()}),d.close.click(function(a){a.preventDefault(),USL_MCE.close()}),d.categories.find("li").click(function(){USL_MCE.filter_by_category(a(this))})},search:function(){var b,c,e=!1,f=1e3,g=300;d.wrap.find('input[name="usl-mce-search"]').on("keyup",function(){var h=a(this).val();e||d.list.animate({opacity:0},g),e=!0,c=""===h?1:f,clearTimeout(b),b=setTimeout(function(){e=!1,d.list.animate({opacity:1},g),d.list.find("> li").each(function(){var b=a(this).find(".title").text(),c=a(this).find(".description").text(),d=a(this).attr("data-code"),e=b+c+d;e.indexOf(h)<0?a(this).hide():a(this).show()})},c)})},activate_shortcode:function(){d.list.find(".accordion-section-title, .usl-mce-sc-title").off("click").click(function(){var b=a(this).closest("li"),c=b.hasClass("active");d.list.find("li").removeClass("active"),a(this).hasClass("accordion-section-title")||d.list.find("li").removeClass("open"),c||b.addClass("active")})},prevent_window_scroll:function(){d.list.bind("mousewheel",function(b){return a(this).scrollTop(a(this).scrollTop()-b.originalEvent.wheelDeltaY),!1})},filter_by_category:function(b){var c=b.attr("data-category"),e=d.list.find("li"),f=d.list.find("li.active");this.refresh(f),"all"===c?e.show():e.each(function(){c!==a(this).attr("data-category")?a(this).hide():a(this).show()})},list_height:function(){var a=d.wrap.innerHeight()-d.title.outerHeight(!0)-d.search.outerHeight(!0)-d.categories.outerHeight(!0)-d.wrap.find(".dashicons-leftright").outerHeight(!0)-d.footer.outerHeight(!0);console.log(d.wrap.innerHeight()),console.log(d.title.outerHeight(!0)),console.log(d.search.outerHeight(!0)),console.log(d.categories.outerHeight(!0)),console.log(d.wrap.find(".dashicons-leftright").outerHeight(!0)),console.log(d.footer.outerHeight(!0)),d.list.height(a)},add_to_mce:function(){tinymce.PluginManager.add("usl_button",function(a){a.addButton("usl_button",{icon:"usl-mce-icon",cmd:"usl-open"}),a.addCommand("usl-open",function(){USL_MCE.open()})})},open:function(){if("undefined"!=typeof tinymce){var e=tinymce.get(wpActiveEditor);b=e&&!e.isHidden()?e:null}c=b.selection.getContent(),a(document).trigger("usl-mce-open"),d.wrap.show(),d.backdrop.show(),this.list_height()},close:function(){b.focus(),a(document).trigger("usl-mce-close"),d.wrap.hide(),d.backdrop.hide()},update:function(){var a,e,f=d.list.find("li.active"),g=f.find(".usl-mce-form").serializeArray(),h=f.attr("data-code");if(this.validate()){if(a=USL_Data.all_shortcodes[h],e="["+h,g.length)for(i=0;i<g.length;i++)g[i].value.length&&(e+=" "+g[i].name+'="'+g[i].value+'"');e+="]",a.wrapping&&(e+=c+"[/"+h+"]"),b.insertContent(e),this.close(),this.refresh(f)}},validate:function(){var b=d.list.find("li.active"),c=!0;return b.find(".usl-mce-sc-att-field").each(function(){var b=a(this).attr("data-required"),d=a(this).find("input, select").val();"1"!==b||d?a(this).closest(".usl-mce-sc-att-row").removeClass("invalid"):(a(this).closest(".usl-mce-sc-att-row").addClass("invalid"),c=!1)}),c},refresh:function(a){a.find("input").val(""),a.find("select").prop("selectedIndex",0),a.removeClass("active open")}},a(function(){USL_MCE.init()}),a(window).load(function(){USL_MCE.load()}),a(window).resize(function(){USL_MCE.resize()})}(jQuery)}
//# sourceMappingURL=ultimate-shortcodes-library-admin.min.js.map